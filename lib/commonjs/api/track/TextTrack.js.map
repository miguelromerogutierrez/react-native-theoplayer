{"version":3,"names":["filterRenderableTracks","textTracks","filter","textTrack","kind","filterThumbnailTracks","find","isThumbnailTrack","label","hasTextTrack","textTrackList","t","uid","removeTextTrack","addTextTrack","hasTextTrackCue","cue","cues","c","removeTextTrackCue","addTextTrackCue","push","findTextTrackByUid"],"sources":["TextTrack.ts"],"sourcesContent":["import type { Track } from './Track';\nimport type { TextTrackCue } from './TextTrackCue';\n\nexport type TextTrackType = 'srt' | 'ttml' | 'webvtt' | 'cea608' | '';\n\nexport type TextTrackKind = 'subtitles' | 'captions' | 'descriptions' | 'chapters' | 'metadata' | 'thumbnails';\n\nexport type TextTrackMode = 'disabled' | 'showing';\n\nexport interface TextTrack extends Track {\n  /**\n   * The kind of the text track, represented by a value from the following list:\n   * <br/> - `'subtitles'`: The track contains subtitles.\n   * <br/> - `'captions'`: The track contains closed captions, a translation of dialogue and sound effects.\n   * <br/> - `'descriptions'`: The track contains descriptions, a textual description of the video.\n   * <br/> - `'chapters'`: The track contains chapter titles.\n   * <br/> - `'metadata'`: The track contains metadata. This track will not serve display purposes.\n   */\n  readonly kind: TextTrackKind;\n\n  /**\n   * The label of the text track.\n   */\n  label: string;\n\n  /**\n   * The language of the text track.\n   */\n  readonly language: string;\n\n  /**\n   * The identifier of the text track.\n   *\n   * @remarks\n   * <br/> - This identifier can be used to distinguish between related tracks, e.g. tracks in the same list.\n   */\n  readonly id: string;\n\n  /**\n   * A unique identifier of the text track.\n   *\n   * @remarks\n   * <br/> - This identifier is unique across tracks of a THEOplayer instance and can be used to distinguish between tracks.\n   */\n  readonly uid: number;\n\n  /**\n   * The mode of the text track, represented by a value from the following list:\n   * <br/> - `'disabled'`: The track is disabled.\n   * <br/> - `'showing'`: The track is showing.\n   */\n  mode: TextTrackMode;\n\n  /**\n   * The content type of the text track.\n   */\n  readonly type: TextTrackType;\n\n  /**\n   * The list of cues of the track.\n   *\n   * @remarks\n   * <br/> - If the {@link TextTrack.mode} is `'disabled'`, this property is `null`.\n   */\n  cues: TextTrackCue[] | null;\n\n  /**\n   * The source of the text track.\n   */\n  readonly src: string;\n\n  /**\n   * Indicates whether the track contains Forced Narrative cues.\n   * This may only be true for subtitle tracks where\n   * <br/> - For DASH: the corresponding AdaptationSet contains a child Role with its value attribute equal to `'forced_subtitle'`\n   * <br/> - For HLS: the corresponding #EXT-X-MEDIA tag contains the attributes TYPE=SUBTITLES and FORCED=YES (not supported yet)\n   */\n  readonly forced: boolean;\n}\n\n/**\n * Retain renderable tracks.\n * https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-showing\n */\nexport function filterRenderableTracks(textTracks: TextTrack[] | undefined): TextTrack[] | undefined {\n  return textTracks && textTracks.filter((textTrack) => textTrack.kind === 'subtitles' || textTrack.kind === 'captions');\n}\n\n/**\n * Retain first thumbnail track encountered in the textTracks list.\n */\nexport function filterThumbnailTracks(textTracks: TextTrack[] | undefined): TextTrack | undefined {\n  return textTracks && textTracks.find(isThumbnailTrack);\n}\n\n/**\n * Query whether a track is a valid thumbnail track.\n */\nexport function isThumbnailTrack(textTrack: TextTrack | undefined): boolean {\n  return !!textTrack && (textTrack.kind === 'thumbnails' || (textTrack.kind === 'metadata' && textTrack.label === 'thumbnails'));\n}\n\nexport function hasTextTrack(textTrackList: TextTrack[], textTrack: TextTrack): boolean {\n  return !!(textTrackList && textTrack && textTrackList.find((t) => t.uid === textTrack.uid));\n}\n\nexport function removeTextTrack(textTrackList: TextTrack[], textTrack: TextTrack): TextTrack[] {\n  return textTrackList && textTrack ? textTrackList.filter((t) => t.uid !== textTrack.uid) : textTrackList;\n}\n\nexport function addTextTrack(textTrackList: TextTrack[], textTrack: TextTrack): TextTrack[] {\n  return textTrackList && textTrack && !hasTextTrack(textTrackList, textTrack) ? [...textTrackList, textTrack] : textTrackList;\n}\n\nexport function hasTextTrackCue(textTrack: TextTrack, cue: TextTrackCue): boolean {\n  return !!(textTrack.cues && cue && textTrack.cues.find((c) => cue.uid === c.uid));\n}\n\nexport function removeTextTrackCue(textTrack: TextTrack, cue: TextTrackCue) {\n  if (textTrack && textTrack.cues && cue && !hasTextTrackCue(textTrack, cue)) {\n    textTrack.cues = textTrack.cues.filter((c) => c.uid !== cue.uid);\n  }\n}\n\nexport function addTextTrackCue(textTrack: TextTrack, cue: TextTrackCue) {\n  if (textTrack && textTrack.cues && cue && !hasTextTrackCue(textTrack, cue)) {\n    textTrack.cues.push(cue);\n  }\n}\n\nexport function findTextTrackByUid(textTracks: TextTrack[], uid: number): TextTrack | undefined {\n  return textTracks.find((t) => t.uid === uid);\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACO,SAASA,sBAAT,CAAgCC,UAAhC,EAA8F;EACnG,OAAOA,UAAU,IAAIA,UAAU,CAACC,MAAX,CAAmBC,SAAD,IAAeA,SAAS,CAACC,IAAV,KAAmB,WAAnB,IAAkCD,SAAS,CAACC,IAAV,KAAmB,UAAtF,CAArB;AACD;AAED;AACA;AACA;;;AACO,SAASC,qBAAT,CAA+BJ,UAA/B,EAA2F;EAChG,OAAOA,UAAU,IAAIA,UAAU,CAACK,IAAX,CAAgBC,gBAAhB,CAArB;AACD;AAED;AACA;AACA;;;AACO,SAASA,gBAAT,CAA0BJ,SAA1B,EAAqE;EAC1E,OAAO,CAAC,CAACA,SAAF,KAAgBA,SAAS,CAACC,IAAV,KAAmB,YAAnB,IAAoCD,SAAS,CAACC,IAAV,KAAmB,UAAnB,IAAiCD,SAAS,CAACK,KAAV,KAAoB,YAAzG,CAAP;AACD;;AAEM,SAASC,YAAT,CAAsBC,aAAtB,EAAkDP,SAAlD,EAAiF;EACtF,OAAO,CAAC,EAAEO,aAAa,IAAIP,SAAjB,IAA8BO,aAAa,CAACJ,IAAd,CAAoBK,CAAD,IAAOA,CAAC,CAACC,GAAF,KAAUT,SAAS,CAACS,GAA9C,CAAhC,CAAR;AACD;;AAEM,SAASC,eAAT,CAAyBH,aAAzB,EAAqDP,SAArD,EAAwF;EAC7F,OAAOO,aAAa,IAAIP,SAAjB,GAA6BO,aAAa,CAACR,MAAd,CAAsBS,CAAD,IAAOA,CAAC,CAACC,GAAF,KAAUT,SAAS,CAACS,GAAhD,CAA7B,GAAoFF,aAA3F;AACD;;AAEM,SAASI,YAAT,CAAsBJ,aAAtB,EAAkDP,SAAlD,EAAqF;EAC1F,OAAOO,aAAa,IAAIP,SAAjB,IAA8B,CAACM,YAAY,CAACC,aAAD,EAAgBP,SAAhB,CAA3C,GAAwE,CAAC,GAAGO,aAAJ,EAAmBP,SAAnB,CAAxE,GAAwGO,aAA/G;AACD;;AAEM,SAASK,eAAT,CAAyBZ,SAAzB,EAA+Ca,GAA/C,EAA2E;EAChF,OAAO,CAAC,EAAEb,SAAS,CAACc,IAAV,IAAkBD,GAAlB,IAAyBb,SAAS,CAACc,IAAV,CAAeX,IAAf,CAAqBY,CAAD,IAAOF,GAAG,CAACJ,GAAJ,KAAYM,CAAC,CAACN,GAAzC,CAA3B,CAAR;AACD;;AAEM,SAASO,kBAAT,CAA4BhB,SAA5B,EAAkDa,GAAlD,EAAqE;EAC1E,IAAIb,SAAS,IAAIA,SAAS,CAACc,IAAvB,IAA+BD,GAA/B,IAAsC,CAACD,eAAe,CAACZ,SAAD,EAAYa,GAAZ,CAA1D,EAA4E;IAC1Eb,SAAS,CAACc,IAAV,GAAiBd,SAAS,CAACc,IAAV,CAAef,MAAf,CAAuBgB,CAAD,IAAOA,CAAC,CAACN,GAAF,KAAUI,GAAG,CAACJ,GAA3C,CAAjB;EACD;AACF;;AAEM,SAASQ,eAAT,CAAyBjB,SAAzB,EAA+Ca,GAA/C,EAAkE;EACvE,IAAIb,SAAS,IAAIA,SAAS,CAACc,IAAvB,IAA+BD,GAA/B,IAAsC,CAACD,eAAe,CAACZ,SAAD,EAAYa,GAAZ,CAA1D,EAA4E;IAC1Eb,SAAS,CAACc,IAAV,CAAeI,IAAf,CAAoBL,GAApB;EACD;AACF;;AAEM,SAASM,kBAAT,CAA4BrB,UAA5B,EAAqDW,GAArD,EAAyF;EAC9F,OAAOX,UAAU,CAACK,IAAX,CAAiBK,CAAD,IAAOA,CAAC,CAACC,GAAF,KAAUA,GAAjC,CAAP;AACD"}