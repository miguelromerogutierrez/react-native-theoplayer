{"version":3,"names":["React","PureComponent","findNodeHandle","StyleSheet","requireNativeComponent","View","UIManager","Platform","styles","THEOplayerNativeAdsAPI","decodeNanInf","THEOplayerView","constructor","props","reset","onSourceChange","maybeChangeBufferingState","onLoadStart","onLoadedData","event","onLoadedMetadata","nativeEvent","duration","error","setState","onError","onProgress","onPlay","onPlaying","onPause","onSeeking","onSeeked","onEnded","readyState","onReadyStateChange","onTimeUpdate","onDurationChange","onSegmentNotFound","onTextTrackListEvent","onTextTrackEvent","onMediaTrackListEvent","onMediaTrackEvent","onAdEvent","onFullscreenPlayerWillPresent","onFullscreenPlayerDidPresent","onFullscreenPlayerWillDismiss","onFullscreenPlayerDidDismiss","_root","createRef","state","initialState","_adsApi","componentWillUnmount","OS","destroyTheoPlayer","node","current","command","Commands","destroy","params","dispatchViewManagerCommand","seek","time","isNaN","Error","setNativeProps","nativeHandle","ads","nativeProps","isBuffering","wasBuffering","paused","newIsBuffering","onBufferingStateChange","buildWrapperProps","targetVideoQuality","Object","assign","Array","isArray","render","wrapperProps","base","style","source","_onSourceChange","_onLoadStart","_onLoadedData","_onLoadedMetadata","_onError","_onProgress","_onPlay","_onPlaying","_onPause","_onSeeking","_onSeeked","_onEnded","_onReadStateChange","_onTimeUpdate","_onDurationChange","_onSegmentNotFound","_onTextTrackListEvent","_onTextTrackEvent","_onMediaTrackListEvent","_onMediaTrackEvent","_onAdEvent","_onFullscreenPlayerWillPresent","_onFullscreenPlayerDidPresent","_onFullscreenPlayerWillDismiss","_onFullscreenPlayerDidDismiss","absoluteFill","undefined","LINKING_ERROR","select","ios","default","ComponentName","THEOplayerRCTView","getViewManagerConfig"],"sources":["THEOplayerView.tsx"],"sourcesContent":["import React, { PureComponent } from 'react';\nimport { findNodeHandle, StyleSheet, requireNativeComponent, View, UIManager, Platform, NativeSyntheticEvent, HostComponent } from 'react-native';\nimport type {\n  DurationChangeEvent,\n  ErrorEvent,\n  LoadedMetadataEvent,\n  ReadyStateChangeEvent,\n  THEOplayerViewComponent,\n  THEOplayerViewProps,\n  TimeUpdateEvent,\n  ProgressEvent,\n  PlayerError,\n  SegmentNotFoundEvent,\n  TextTrackListEvent,\n  TextTrackEvent,\n  AdEvent,\n  AdsAPI,\n  MediaTrackEvent,\n  MediaTrackListEvent,\n} from 'react-native-theoplayer';\n\nimport styles from './THEOplayerView.style';\nimport type { SourceDescription } from 'react-native-theoplayer';\nimport { THEOplayerNativeAdsAPI } from './ads/THEOplayerNativeAdsAPI';\nimport { decodeNanInf } from './utils/TypeUtils';\n\ninterface THEOplayerRCTViewProps extends THEOplayerViewProps {\n  ref: React.RefObject<THEOplayerViewNativeComponent>;\n  src: SourceDescription;\n  seek?: number;\n\n  onNativeSourceChange: () => void;\n  onNativeLoadStart: () => void;\n  onNativeLoadedData: () => void;\n  onNativeLoadedMetadata: (event: NativeSyntheticEvent<LoadedMetadataEvent>) => void;\n  onNativeReadyStateChange?: (event: NativeSyntheticEvent<ReadyStateChangeEvent>) => void;\n  onNativeError: (event: NativeSyntheticEvent<ErrorEvent>) => void;\n  onNativeProgress: (event: NativeSyntheticEvent<ProgressEvent>) => void;\n  onNativePlay: () => void;\n  onNativePlaying: () => void;\n  onNativePause: () => void;\n  onNativeSeeking: () => void;\n  onNativeSeeked: () => void;\n  onNativeEnded: () => void;\n  onNativeTimeUpdate: (event: NativeSyntheticEvent<TimeUpdateEvent>) => void;\n  onNativeDurationChange: (event: NativeSyntheticEvent<DurationChangeEvent>) => void;\n  onNativeSegmentNotFound: (event: NativeSyntheticEvent<SegmentNotFoundEvent>) => void;\n  onNativeTextTrackListEvent: (event: NativeSyntheticEvent<TextTrackListEvent>) => void;\n  onNativeTextTrackEvent: (event: NativeSyntheticEvent<TextTrackEvent>) => void;\n  onNativeMediaTrackListEvent: (event: NativeSyntheticEvent<MediaTrackListEvent>) => void;\n  onNativeMediaTrackEvent: (event: NativeSyntheticEvent<MediaTrackEvent>) => void;\n  onNativeAdEvent: (event: NativeSyntheticEvent<AdEvent>) => void;\n  onNativeFullscreenPlayerWillPresent?: () => void;\n  onNativeFullscreenPlayerDidPresent?: () => void;\n  onNativeFullscreenPlayerWillDismiss?: () => void;\n  onNativeFullscreenPlayerDidDismiss?: () => void;\n}\n\ninterface THEOplayerRCTViewState {\n  isBuffering: boolean;\n  error?: PlayerError;\n}\n\ninterface THEOplayerViewNativeComponent extends THEOplayerViewComponent, HostComponent<THEOplayerViewProps> {\n  setNativeProps: (props: Partial<THEOplayerRCTViewProps>) => void;\n}\n\nexport class THEOplayerView extends PureComponent<THEOplayerViewProps, THEOplayerRCTViewState> implements THEOplayerViewComponent {\n  private readonly _root: React.RefObject<THEOplayerViewNativeComponent>;\n  private readonly _adsApi: THEOplayerNativeAdsAPI;\n\n  private static initialState: THEOplayerRCTViewState = {\n    isBuffering: false,\n    error: undefined,\n  };\n\n  constructor(props: THEOplayerRCTViewProps) {\n    super(props);\n    this._root = React.createRef();\n    this.state = THEOplayerView.initialState;\n    this._adsApi = new THEOplayerNativeAdsAPI(this);\n  }\n\n  componentWillUnmount() {\n    if (Platform.OS === 'ios') {\n      // on iOS, we trigger an explicit 'destroy' to clean up the underlying THEOplayer\n      this.destroyTheoPlayer();\n    }\n  }\n\n  private destroyTheoPlayer() {\n    const node = findNodeHandle(this._root.current);\n    const command = (UIManager as { [index: string]: any })['THEOplayerRCTView'].Commands.destroy;\n    const params: any[] = [];\n    UIManager.dispatchViewManagerCommand(node, command, params);\n  }\n\n  public seek(time: number): void {\n    if (isNaN(time)) {\n      throw new Error('Specified time is not a number');\n    }\n    this.setNativeProps({ seek: time });\n  }\n\n  public get nativeHandle(): number | null {\n    return findNodeHandle(this._root.current);\n  }\n\n  public get ads(): AdsAPI {\n    return this._adsApi;\n  }\n\n  private reset() {\n    this.setState(THEOplayerView.initialState);\n  }\n\n  private setNativeProps(nativeProps: Partial<THEOplayerRCTViewProps>) {\n    if (this._root?.current) {\n      this._root.current.setNativeProps(nativeProps);\n    }\n  }\n\n  private maybeChangeBufferingState(isBuffering: boolean) {\n    const { isBuffering: wasBuffering, error } = this.state;\n    const { paused } = this.props;\n\n    // do not change state to buffering in case of an error or if the player is paused\n    const newIsBuffering = isBuffering && !error && !paused;\n    this.setState({ isBuffering: newIsBuffering });\n\n    // notify change in buffering state\n    if (newIsBuffering !== wasBuffering && this.props.onBufferingStateChange) {\n      this.props.onBufferingStateChange(isBuffering);\n    }\n  }\n\n  private _onSourceChange = () => {\n    this.reset();\n\n    if (this.props.onSourceChange) {\n      this.props.onSourceChange();\n    }\n  };\n\n  private _onLoadStart = () => {\n    // potentially notify change in buffering state\n    this.maybeChangeBufferingState(true);\n\n    if (this.props.onLoadStart) {\n      this.props.onLoadStart();\n    }\n  };\n\n  private _onLoadedData = () => {\n    if (this.props.onLoadedData) {\n      this.props.onLoadedData();\n    }\n  };\n\n  private _onLoadedMetadata = (event: NativeSyntheticEvent<LoadedMetadataEvent>) => {\n    if (this.props.onLoadedMetadata) {\n      this.props.onLoadedMetadata({\n        ...event.nativeEvent,\n        duration: decodeNanInf(event.nativeEvent.duration),\n      });\n    }\n  };\n\n  private _onError = (event: NativeSyntheticEvent<ErrorEvent>) => {\n    const { error } = event.nativeEvent;\n    this.setState({ error });\n\n    // potentially notify change in buffering state\n    this.maybeChangeBufferingState(false);\n\n    if (this.props.onError) {\n      this.props.onError(event.nativeEvent);\n    }\n  };\n\n  private _onProgress = (event: NativeSyntheticEvent<ProgressEvent>) => {\n    if (this.props.onProgress) {\n      this.props.onProgress(event.nativeEvent);\n    }\n  };\n\n  private _onPlay = () => {\n    if (this.props.onPlay) {\n      this.props.onPlay();\n    }\n  };\n\n  private _onPlaying = () => {\n    // potentially notify change in buffering state\n    this.maybeChangeBufferingState(false);\n\n    if (this.props.onPlaying) {\n      this.props.onPlaying();\n    }\n  };\n\n  private _onPause = () => {\n    if (this.props.onPause) {\n      this.props.onPause();\n    }\n  };\n\n  private _onSeeking = () => {\n    if (this.props.onSeeking) {\n      this.props.onSeeking();\n    }\n  };\n\n  private _onSeeked = () => {\n    if (this.props.onSeeked) {\n      this.props.onSeeked();\n    }\n  };\n\n  private _onEnded = () => {\n    if (this.props.onEnded) {\n      this.props.onEnded();\n    }\n  };\n\n  private _onReadStateChange = (event: NativeSyntheticEvent<ReadyStateChangeEvent>) => {\n    // potentially notify change in buffering state\n    this.maybeChangeBufferingState(event.nativeEvent.readyState < 3);\n\n    if (this.props.onReadyStateChange) {\n      this.props.onReadyStateChange(event.nativeEvent);\n    }\n  };\n\n  private _onTimeUpdate = (event: NativeSyntheticEvent<TimeUpdateEvent>) => {\n    if (this.props.onTimeUpdate) {\n      this.props.onTimeUpdate(event.nativeEvent);\n    }\n  };\n\n  private _onDurationChange = (event: NativeSyntheticEvent<DurationChangeEvent>) => {\n    if (this.props.onDurationChange) {\n      this.props.onDurationChange({\n        duration: decodeNanInf(event.nativeEvent.duration),\n      });\n    }\n  };\n\n  private _onSegmentNotFound = (event: NativeSyntheticEvent<SegmentNotFoundEvent>) => {\n    if (this.props.onSegmentNotFound) {\n      this.props.onSegmentNotFound(event.nativeEvent);\n    }\n  };\n\n  private _onTextTrackListEvent = (event: NativeSyntheticEvent<TextTrackListEvent>) => {\n    if (this.props.onTextTrackListEvent) {\n      this.props.onTextTrackListEvent(event.nativeEvent);\n    }\n  };\n\n  private _onTextTrackEvent = (event: NativeSyntheticEvent<TextTrackEvent>) => {\n    if (this.props.onTextTrackEvent) {\n      this.props.onTextTrackEvent(event.nativeEvent);\n    }\n  };\n\n  private _onMediaTrackListEvent = (event: NativeSyntheticEvent<MediaTrackListEvent>) => {\n    if (this.props.onMediaTrackListEvent) {\n      this.props.onMediaTrackListEvent(event.nativeEvent);\n    }\n  };\n\n  private _onMediaTrackEvent = (event: NativeSyntheticEvent<MediaTrackEvent>) => {\n    if (this.props.onMediaTrackEvent) {\n      this.props.onMediaTrackEvent(event.nativeEvent);\n    }\n  };\n\n  private _onAdEvent = (event: NativeSyntheticEvent<AdEvent>) => {\n    if (this.props.onAdEvent) {\n      this.props.onAdEvent(event.nativeEvent);\n    }\n  };\n\n  private _onFullscreenPlayerWillPresent = () => {\n    if (this.props.onFullscreenPlayerWillPresent) {\n      this.props.onFullscreenPlayerWillPresent();\n    }\n  };\n\n  private _onFullscreenPlayerDidPresent = () => {\n    if (this.props.onFullscreenPlayerDidPresent) {\n      this.props.onFullscreenPlayerDidPresent();\n    }\n  };\n\n  private _onFullscreenPlayerWillDismiss = () => {\n    if (this.props.onFullscreenPlayerWillDismiss) {\n      this.props.onFullscreenPlayerWillDismiss();\n    }\n  };\n\n  private _onFullscreenPlayerDidDismiss = () => {\n    if (this.props.onFullscreenPlayerDidDismiss) {\n      this.props.onFullscreenPlayerDidDismiss();\n    }\n  };\n\n  private buildWrapperProps(): THEOplayerViewProps {\n    const { targetVideoQuality } = this.props;\n    return Object.assign(\n      {},\n      {\n        ...this.props,\n        // Always pass an array for targetVideoQuality.\n        targetVideoQuality: !targetVideoQuality ? [] : Array.isArray(targetVideoQuality) ? targetVideoQuality : [targetVideoQuality],\n      },\n    );\n  }\n\n  public render(): JSX.Element {\n    const wrapperProps = this.buildWrapperProps();\n    return (\n      <View style={[styles.base, wrapperProps.style]}>\n        <THEOplayerRCTView\n          ref={this._root}\n          src={this.props.source || {}}\n          onNativeSourceChange={this._onSourceChange}\n          onNativeLoadStart={this._onLoadStart}\n          onNativeLoadedData={this._onLoadedData}\n          onNativeLoadedMetadata={this._onLoadedMetadata}\n          onNativeError={this._onError}\n          onNativeProgress={this._onProgress}\n          onNativePlay={this._onPlay}\n          onNativePlaying={this._onPlaying}\n          onNativePause={this._onPause}\n          onNativeSeeking={this._onSeeking}\n          onNativeSeeked={this._onSeeked}\n          onNativeEnded={this._onEnded}\n          onNativeReadyStateChange={this._onReadStateChange}\n          onNativeTimeUpdate={this._onTimeUpdate}\n          onNativeDurationChange={this._onDurationChange}\n          onNativeSegmentNotFound={this._onSegmentNotFound}\n          onNativeTextTrackListEvent={this._onTextTrackListEvent}\n          onNativeTextTrackEvent={this._onTextTrackEvent}\n          onNativeMediaTrackListEvent={this._onMediaTrackListEvent}\n          onNativeMediaTrackEvent={this._onMediaTrackEvent}\n          onNativeAdEvent={this._onAdEvent}\n          onNativeFullscreenPlayerWillPresent={this._onFullscreenPlayerWillPresent}\n          onNativeFullscreenPlayerDidPresent={this._onFullscreenPlayerDidPresent}\n          onNativeFullscreenPlayerWillDismiss={this._onFullscreenPlayerWillDismiss}\n          onNativeFullscreenPlayerDidDismiss={this._onFullscreenPlayerDidDismiss}\n          style={StyleSheet.absoluteFill}\n          {...wrapperProps}\n        />\n      </View>\n    );\n  }\n}\n\nconst LINKING_ERROR =\n  `The package 'react-native-theoplayer' doesn't seem to be linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo managed workflow\\n';\n\nconst ComponentName = 'THEOplayerRCTView';\n\nconst THEOplayerRCTView =\n  UIManager.getViewManagerConfig(ComponentName) != null\n    ? requireNativeComponent<THEOplayerRCTViewProps>(ComponentName)\n    : () => {\n        throw new Error(LINKING_ERROR);\n      };\n"],"mappings":"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"}